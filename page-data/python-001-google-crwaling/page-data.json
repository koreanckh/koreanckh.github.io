{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/python-001-google-crwaling/",
    "result": {"data":{"cur":{"id":"815d95c7-9fb2-55fa-83f0-d20428be3383","html":"<h2 id=\"1-크롤링을-하게-된-이유\" style=\"position:relative;\"><a href=\"#1-%ED%81%AC%EB%A1%A4%EB%A7%81%EC%9D%84-%ED%95%98%EA%B2%8C-%EB%90%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"1 크롤링을 하게 된 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 크롤링을 하게 된 이유</h2>\n<p>사이드 프로젝트 중에 덤프 이미지 파일이 필요해서 구하려고 하다보니 자연스럽게 크롤링으로 이미지를 가져와야 겠다는 생각이 들었다.<br>\n파이썬을 해본적이 없어서 여기저기 올라와 있는 글을 보며 뜨문뜨문 하다보니 여기저기 문제가 생기기도 했는데..<br>\n유튜브를 보니 굉장히 쉬운 방법이 있길래 정리해본다.</p>\n<h2 id=\"2-실패한-코드\" style=\"position:relative;\"><a href=\"#2-%EC%8B%A4%ED%8C%A8%ED%95%9C-%EC%BD%94%EB%93%9C\" aria-label=\"2 실패한 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 실패한 코드</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># selenium 관련 라이브러리를 불러오는 코드</span>\n<span class=\"token keyword\">from</span> turtle <span class=\"token keyword\">import</span> clear\n<span class=\"token keyword\">from</span> selenium <span class=\"token keyword\">import</span> webdriver\n<span class=\"token keyword\">from</span> selenium<span class=\"token punctuation\">.</span>webdriver<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>keys <span class=\"token keyword\">import</span> Keys\n<span class=\"token keyword\">from</span> selenium<span class=\"token punctuation\">.</span>webdriver<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>by <span class=\"token keyword\">import</span> By\n\n<span class=\"token comment\"># 프로그램을 잠깐 멈추게 하기위한 라이브러리</span>\n<span class=\"token keyword\">import</span> time\n\n<span class=\"token comment\"># url로 이미지를 다운받기 위한 라이브러리</span>\n<span class=\"token keyword\">import</span> urllib<span class=\"token punctuation\">.</span>request\n\n<span class=\"token comment\">## SSL: CERTIFICATE_VERIFY_FAILED 에러 조치</span>\n<span class=\"token keyword\">import</span> ssl\nssl<span class=\"token punctuation\">.</span>_create_default_https_context <span class=\"token operator\">=</span> ssl<span class=\"token punctuation\">.</span>_create_unverified_context\n\n<span class=\"token comment\">### 디렉토리가 없을경우 새로 생성.</span>\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">def</span> <span class=\"token function\">createFolder</span><span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            os<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> OSError<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error : create directory :: '</span> <span class=\"token operator\">+</span> directory<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># driver로 해당 페이지로 이동 : 구글 이미지로 이동</span>\ndriver<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://www.google.co.kr/imghp?hl=ko&amp;ogbl\"</span><span class=\"token punctuation\">)</span>\n\nitemList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">## </span>\n<span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./itemList.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    line <span class=\"token operator\">=</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>readline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> line<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">break</span>\n    itemList<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> itemList <span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 검색창 element 찾기 / 구글 이미지 input name = q</span>\n        elem <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element<span class=\"token punctuation\">(</span>By<span class=\"token punctuation\">.</span>NAME<span class=\"token punctuation\">,</span> <span class=\"token string\">\"q\"</span><span class=\"token punctuation\">)</span>\n\n        elem<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\"># 원하는 값 입력</span>\n        elem<span class=\"token punctuation\">.</span>send_keys<span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 입력한 값 전송</span>\n        elem<span class=\"token punctuation\">.</span>send_keys<span class=\"token punctuation\">(</span>Keys<span class=\"token punctuation\">.</span>RETURN<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 검색후 로드 될 때까지 대기</span>\n        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n\n        i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>\n\n            <span class=\"token comment\"># 내가 필요한 요소 선택 : 검색한 미리보기 이미지</span>\n            images <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_elements<span class=\"token punctuation\">(</span>By<span class=\"token punctuation\">.</span>CSS_SELECTOR<span class=\"token punctuation\">,</span> <span class=\"token string\">\"#islrg > div > div > a > div > img\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\"># 미리보기 클릭하여 로드 될때까지 대기.</span>\n            time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">.</span>find_element<span class=\"token punctuation\">(</span>By<span class=\"token punctuation\">.</span>XPATH<span class=\"token punctuation\">,</span> <span class=\"token string\">'/html/body/div[2]/c-wiz/div[3]/div[2]/div[3]/div/div/div[3]/div[2]/c-wiz/div[1]/div[1]/div/div[2]/a/img'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            imageUrl <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element<span class=\"token punctuation\">(</span>By<span class=\"token punctuation\">.</span>XPATH<span class=\"token punctuation\">,</span> <span class=\"token string\">'/html/body/div[2]/c-wiz/div[3]/div[2]/div[3]/div/div/div[3]/div[2]/c-wiz/div[1]/div[1]/div/div[2]/a/img'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_attribute<span class=\"token punctuation\">(</span><span class=\"token string\">\"src\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 크게 뜬 이미지 선택하여 \"src\" 속성을 받아옴</span>\n\n            <span class=\"token keyword\">if</span> i <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">:</span>\n                createFolder<span class=\"token punctuation\">(</span><span class=\"token string\">\"./img/\"</span> <span class=\"token operator\">+</span> item<span class=\"token punctuation\">)</span>\n\n            urllib<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>urlretrieve<span class=\"token punctuation\">(</span>imageUrl<span class=\"token punctuation\">,</span> <span class=\"token string\">\"./img/\"</span> <span class=\"token operator\">+</span> item <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span><span class=\"token string\">\".jpg\"</span><span class=\"token punctuation\">)</span>\n            \n            i <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n            \n<span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> ex<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'에러발생'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">)</span>\n\ndriver<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"1-계획\" style=\"position:relative;\"><a href=\"#1-%EA%B3%84%ED%9A%8D\" aria-label=\"1 계획 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) 계획</h3>\n<p><code class=\"language-text\">selenium + chromedriver</code> 조합으로 하여 실제로 페이지를 작동하고 그것을 기반으로 크롤링을 하려고 했다.(크롤링 방법에 대해 몰라서 어디선가 들어본 selenium으로 시작…)</p>\n<h3 id=\"2-문제\" style=\"position:relative;\"><a href=\"#2-%EB%AC%B8%EC%A0%9C\" aria-label=\"2 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) 문제</h3>\n<p>일단 페이지 작동 및 다운로드에는 성공했는데..<br>\n문제는 원본 이미지 다운로드를 원했는데 작은 사이즈의 썸네일 이미지가 받아지는 것이 문제였다…;<br>\n<code class=\"language-text\">By.Xpath</code>나 <code class=\"language-text\">By.CSS_SELECTOR</code>등의 방법으로 해봤는데도 공톰점을 찾는 방식이 잘못 되었는지 원하는 사진이 다운로드 되다 말다를 반복해서 이건 아니다 싶어서 다른 방법을 찾아보았다..</p>\n<p>초반에는 selenium 문법이 버전에 따라 바뀐다는 것을 모르고, 인터넷에 많이 떠도는 예제를 따라하다가 예전 문법인 <code class=\"language-text\">find_elements_by_css_selector()</code>을 그대로 사용해서 한참 시간을 버리기도…</p>\n<h2 id=\"3-쉽게-구글-이미지-크롤링-하는법-구글-이미지-한정\" style=\"position:relative;\"><a href=\"#3-%EC%89%BD%EA%B2%8C-%EA%B5%AC%EA%B8%80-%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%81%AC%EB%A1%A4%EB%A7%81-%ED%95%98%EB%8A%94%EB%B2%95-%EA%B5%AC%EA%B8%80-%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%95%9C%EC%A0%95\" aria-label=\"3 쉽게 구글 이미지 크롤링 하는법 구글 이미지 한정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 쉽게 구글 이미지 크롤링 하는법 (구글 이미지 한정)</h2>\n<h3 id=\"1-참고-유튜브\" style=\"position:relative;\"><a href=\"#1-%EC%B0%B8%EA%B3%A0-%EC%9C%A0%ED%8A%9C%EB%B8%8C\" aria-label=\"1 참고 유튜브 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) 참고 유튜브</h3>\n<blockquote>\n<p><a href=\"https://www.youtube.com/watch?v=j5ZpgDBLQ5Q&#x26;t=508s\">https://www.youtube.com/watch?v=j5ZpgDBLQ5Q&#x26;t=508s</a></p>\n</blockquote>\n<p>이걸 보니 <code class=\"language-text\">google-images-download</code> 라는 라이브러리가 있다는걸 알았고, 그래서 구글 이미지 한정으로 쉽게 크롤링 할수 있는것 같았다.</p>\n<h3 id=\"2-google_images_download-라이브러리-다운로드\" style=\"position:relative;\"><a href=\"#2-google_images_download-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"2 google_images_download 라이브러리 다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) google_images_download 라이브러리 다운로드</h3>\n<blockquote>\n<p><a href=\"https://pypi.org/project/google_images_download/\">https://pypi.org/project/google_images_download/</a></p>\n</blockquote>\n<p>여기가 공식 홈페이지인데, 다운로드 방법이나 사용 방법등이 영어로 친절하게 설명이 되어 있다.\n하지만 위 공식 홈페이지에서 최신 버전으로 사용하다보면 에러가 발생할 수도 있다고 하여, 유튜브에 소개된 대로 다른 분이 올려주신 것을 다운받아 사용하였다.</p>\n<h3 id=\"3-크롤링-소스\" style=\"position:relative;\"><a href=\"#3-%ED%81%AC%EB%A1%A4%EB%A7%81-%EC%86%8C%EC%8A%A4\" aria-label=\"3 크롤링 소스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) 크롤링 소스</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> git+https://github.com/Joeclinton1/google-images-download.git</code></pre></div>\n<p>우선은 이렇게 라이브러리를 설치해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">## SSL: CERTIFICATE_VERIFY_FAILED 에러 조치</span>\n<span class=\"token keyword\">import</span> ssl\nssl<span class=\"token punctuation\">.</span>_create_default_https_context <span class=\"token operator\">=</span> ssl<span class=\"token punctuation\">.</span>_create_unverified_context\n\n\n<span class=\"token keyword\">from</span> urllib <span class=\"token keyword\">import</span> response\n<span class=\"token keyword\">from</span> google_images_download <span class=\"token keyword\">import</span> google_images_download\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">googleImageCrwaling</span><span class=\"token punctuation\">(</span>keyword<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    response <span class=\"token operator\">=</span> google_images_download<span class=\"token punctuation\">.</span>googleimagesdownload<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n    arguments <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"keywords\"</span><span class=\"token punctuation\">:</span>keyword<span class=\"token punctuation\">,</span><span class=\"token string\">\"limit\"</span><span class=\"token punctuation\">:</span>limit<span class=\"token punctuation\">,</span><span class=\"token string\">\"print_urls\"</span><span class=\"token punctuation\">:</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"chromedriver\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"./chromedriver\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"format\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"jpg\"</span><span class=\"token punctuation\">}</span>\n    paths <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>download<span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>paths<span class=\"token punctuation\">)</span>\n\n\nitemList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token builtin\">file</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./itemList.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    line <span class=\"token operator\">=</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>readline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> line<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">break</span>\n    itemList<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">file</span><span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> itemList<span class=\"token punctuation\">:</span>\n    googleImageCrwaling<span class=\"token punctuation\">(</span>keyword<span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> limit<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>나 같은 경우에는 원하는 인물들의 이름을 txt 파일에 넣어두고 그 파일을 읽어서 <code class=\"language-text\">keyword</code>에 담기도록 했더니 세상에 금방 다운로드가 된다 ㄷㄷ<br>\n(chromedriver 옵션이 있지만 그걸 사용하지 않으니까 화면 로딩이 필요 없어서 더 빠른 듯 했다!)</p>\n<p>그리고 위 라이브러리로 다운을 받으면 워크스페이스 안에 <code class=\"language-text\">downloads</code> 디렉토리가 생기고 그 밑으로 검색 <code class=\"language-text\">키워드별 폴더</code>가 생성되어 다운로드 후에도 어떤 결과값인이 알기가 편해서 좋았다.</p>\n<p>크롤링 하는 방법을 좀 더 익혀둬야 할 것 같다!!</p>","excerpt":"1. 크롤링을 하게 된 이유 사이드 프로젝트 중에 덤프 이미지 파일이 필요해서 구하려고 하다보니 자연스럽게 크롤링으로 이미지를 가져와야 겠다는 생각이 들었다. 파이썬을 해본적이 없어서 여기저기 올라와 있는 글을 보며 뜨문뜨문 하다보니 여기저기 문제가 생기기도 했는데.. 유튜브를 보니 굉장히 쉬운 방법이 있길래 정리해본다. 2. 실패한 코드 (1) 계획  조합으로 하여 실제로 페이지를 작동하고 그것을 기반으로 크롤링을 하려고 했다.(크롤링 방법에 대해 몰라서 어디선가 들어본 selenium으로 시작…) (2) 문제 일단 페이지 작동 및 다운로드에는 성공했는데.. 문제는 원본 이미지 다운로드를 원했는데 작은 사이즈의 썸네일 이미지가 받아지는 것이 문제였다…; 나 등의 방법으로 해봤는데도 공톰점을 찾는 방식이 잘못 되었는지 원하는 사진이 다운로드 되다 말다를 반복해서 이건 아니다 싶어서 다른 방법을 찾아보았다.. 초반에는 selenium 문법이 버전에 따라 바뀐다는 것을 모르고, 인터넷…","frontmatter":{"date":"October 27, 2022","title":"python으로 구글 이미지 크롤링 하는법","categories":"Python","author":"줌코딩","emoji":"🧢"},"fields":{"slug":"/python-001-google-crwaling/"}},"next":{"id":"b89072b3-5390-557d-8bf2-98da17c80ddb","html":"<h1 id=\"1-mybatis--dto-매핑시-문제\" style=\"position:relative;\"><a href=\"#1-mybatis--dto-%EB%A7%A4%ED%95%91%EC%8B%9C-%EB%AC%B8%EC%A0%9C\" aria-label=\"1 mybatis  dto 매핑시 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Mybatis + DTO 매핑시 문제</h1>\n<p>JPA공부를 하며 사이드 프로젝트를 하려고 하고 있었는데, 급하게 시간을 맞춰야 하는 일정이 생겨서 JPA로 작업하던 것을 놔두고 급하게 Mybatis로 개발을 시작했다. 문제없이 작업을 하고 있었는데 갑자기 Mybatis에서 <code class=\"language-text\">resultType='**Dto'</code>로 하면서 매핑이 제대로 되지 않는 문제가 생겼다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javas\"><pre class=\"language-javas\"><code class=\"language-javas\">@Data\n@Builder\npublic class PerformanceDto {\n\n\tprivate int idx;\n\tprivate String name;\n\tprivate String genreCode;\n\tprivate String statusCode;\n\t\n\t이하 기타 ...\n}</code></pre></div>\n<p>처음에는 에러가 발생한게 아니라 매핑이 꼬인것처럼 원하는 데이터가 dto 파라미터와 제대로 매핑이 되지 않았었다.</p>\n<p>이상하다 싶어서 <code class=\"language-text\">select name from table</code>로 컬럼 하나만 호출 해봤더니 <code class=\"language-text\">DataIntegrityViolationException 'name' cannot be decoded as Integer</code> 또는 <code class=\"language-text\">IndexOutOfBoundsException</code> 라며 에러가 떴다.</p>\n<p>그래서 Dto에 타입 설정을 잘못 했나 싶어서 봤더니 String으로 했음에도 Integer로 디코딩에 실패했다는 에러가 자꾸 발생하였다..</p>\n<h1 id=\"2-원인-해결\" style=\"position:relative;\"><a href=\"#2-%EC%9B%90%EC%9D%B8-%ED%95%B4%EA%B2%B0\" aria-label=\"2 원인 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 원인? 해결?</h1>\n<p>문제는 <code class=\"language-text\">@Builder</code>때문이었다!\n@Builder를 선언해주게 되면 Dto의 기본 생성자가 사라지게 된다고 한다.\n따라서 명시적으로 기본생성자를 만들어주거나 <code class=\"language-text\">@NoArgsConstructor</code>나 <code class=\"language-text\">@AllArgsConstructor</code> 어노테이션을 붙여주니 정상적으로 이용할 수 있게 되었다.<br>\n급한 마음에 어노테이션을 일단 마구 가져다 썼는데, 공식문서를 한번쯤은 읽어보고 사용해야겠다!</p>\n<p>그럼 이제 얼른 마저 만들러 가야겠다…</p>","frontmatter":{"date":"September 20, 2022","title":"Mybatis + DTO 매핑이 꼬이고 자꾸 에러 나는 문제(@Builder 사용중 에러..)","categories":"Spring","author":"막걸리에 감자전","emoji":"💻"},"fields":{"slug":"/spring-003-mybatis-error/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://koreanckh.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/python-001-google-crwaling/","nextSlug":"/spring-003-mybatis-error/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}