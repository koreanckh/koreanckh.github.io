{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/aws-001/",
    "result": {"data":{"cur":{"id":"4c49bcbc-0d62-5a17-be4f-7bc7da339cbf","html":"<blockquote>\n<p>amazon-linux 로 생성한 EC2에서 진행하였습니다.</p>\n</blockquote>\n<h2 id=\"1-ec2에서-git-java-설치\" style=\"position:relative;\"><a href=\"#1-ec2%EC%97%90%EC%84%9C-git-java-%EC%84%A4%EC%B9%98\" aria-label=\"1 ec2에서 git java 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. EC2에서 git, java 설치</h2>\n<ul>\n<li>git 설치</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># git 설치</span>\n<span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> <span class=\"token function\">git</span> -y\n\n<span class=\"token comment\"># git 설치 확인</span>\n<span class=\"token function\">git</span> version</code></pre></div>\n<ul>\n<li>java 설치(각자 버전에 맞게)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># OpenJDK 11 설치</span>\n<span class=\"token function\">sudo</span> amazon-linux-extras <span class=\"token function\">install</span> java-openjdk11\n\n<span class=\"token comment\"># OpenJDK 11 설치 확인</span>\njava -version</code></pre></div>\n<h2 id=\"2-git에서-소스-내려받기\" style=\"position:relative;\"><a href=\"#2-git%EC%97%90%EC%84%9C-%EC%86%8C%EC%8A%A4-%EB%82%B4%EB%A0%A4%EB%B0%9B%EA%B8%B0\" aria-label=\"2 git에서 소스 내려받기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. git에서 소스 내려받기</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone {repository URL}</code></pre></div>\n<h2 id=\"3-패키지-빌드\" style=\"position:relative;\"><a href=\"#3-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%B9%8C%EB%93%9C\" aria-label=\"3 패키지 빌드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 패키지 빌드</h2>\n<blockquote>\n<p>프로젝트 루트 디렉토리에서 실행</p>\n</blockquote>\n<h3 id=\"1-maven\" style=\"position:relative;\"><a href=\"#1-maven\" aria-label=\"1 maven permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) maven</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 메이븐 빌드</span>\nmvn package</code></pre></div>\n<p>maven 빌드 후에 <code class=\"language-text\">/target</code>경로에 <code class=\"language-text\">.jar</code> 확장자명으로 파일이 생성된다. 정상적으로 빌드 되었는지 실행해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">java -jar target/demo-0.0.1-SNAPSHOT.jar</code></pre></div>\n<h3 id=\"2-gradle\" style=\"position:relative;\"><a href=\"#2-gradle\" aria-label=\"2 gradle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) gradle</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 1. \"./gradlew\" 파일에 대한 권한 부여</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token number\">777</span> ./gradlew\n\n<span class=\"token comment\"># 2. gradlew을 이용하여 빌드</span>\n./gradlew clean build</code></pre></div>\n<p>gradle 빌드 후에는 <code class=\"language-text\">/build/libs</code>이하에 <code class=\"language-text\">.jar</code> 파일이 생성된다. 마찬가지로 오류 없이 빌드 되는지 실행해본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">java -jar build/libs/demo-0.0.1-SNAPSHOT.jar</code></pre></div>\n<h2 id=\"4-deploysh-작성\" style=\"position:relative;\"><a href=\"#4-deploysh-%EC%9E%91%EC%84%B1\" aria-label=\"4 deploysh 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. deploy.sh 작성</h2>\n<h3 id=\"1-deploysh-샘플\" style=\"position:relative;\"><a href=\"#1-deploysh-%EC%83%98%ED%94%8C\" aria-label=\"1 deploysh 샘플 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) deploy.sh 샘플</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n\n<span class=\"token assign-left variable\">REPOSITORY</span><span class=\"token operator\">=</span>/home/<span class=\"token punctuation\">{</span>user-name<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/<span class=\"token punctuation\">{</span>project-name<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"> 현재 구동 중인 애플리케이션 pid 확인\"</span>\n\n<span class=\"token assign-left variable\">CURRENT_PID</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>pgrep -fl action <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> java <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $1}'</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"현재 구동 중인 애플리케이션 pid: <span class=\"token variable\">$CURRENT_PID</span>\"</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -z <span class=\"token string\">\"<span class=\"token variable\">$CURRENT_PID</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"현재 구동 중인 애플리케이션이 없으므로 종료하지 않습니다.\"</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"> kill -15 <span class=\"token variable\">$CURRENT_PID</span>\"</span>\n  <span class=\"token function\">kill</span> -15 <span class=\"token variable\">$CURRENT_PID</span>\n  <span class=\"token function\">sleep</span> <span class=\"token number\">5</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"> 새 애플리케이션 배포\"</span>\n\n<span class=\"token comment\"># maven 이나 gradle에 따라 빌드된 jar파일이 생성되는 위치가 다르기 때문에 잘 확인해서 작성해준다.</span>\n<span class=\"token comment\"># 아래 경로는 gradle 기준</span>\n<span class=\"token assign-left variable\">JAR_NAME</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ls</span> -tr $REPOSITORY/build/libs/*.jar <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> -n <span class=\"token number\">1</span><span class=\"token variable\">)</span></span>      <span class=\"token comment\"># gradle ver</span>\n<span class=\"token comment\">#JAR_NAME=$(ls -tr $REPOSITORY/target/*.jar | tail -n 1)     # maven ver</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"> JAR NAME: <span class=\"token variable\">$JAR_NAME</span>\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"> <span class=\"token variable\">$JAR_NAME</span> 에 실행권한 추가\"</span>\n\n<span class=\"token function\">chmod</span> +x <span class=\"token variable\">$JAR_NAME</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"> <span class=\"token variable\">$JAR_NAME</span> 실행\"</span>\n\n<span class=\"token function\">nohup</span> java -jar <span class=\"token variable\">$JAR_NAME</span> <span class=\"token operator\">></span> <span class=\"token variable\">$REPOSITORY</span>/nohup.out <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span></code></pre></div>\n<h3 id=\"2-gradle-빌드-후-서버-구동시-주의사항\" style=\"position:relative;\"><a href=\"#2-gradle-%EB%B9%8C%EB%93%9C-%ED%9B%84-%EC%84%9C%EB%B2%84-%EA%B5%AC%EB%8F%99%EC%8B%9C-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\" aria-label=\"2 gradle 빌드 후 서버 구동시 주의사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) gradle 빌드 후 서버 구동시 주의사항</h3>\n<p>gradle 빌드시에 따로 설정을 해주지 않으면 <code class=\"language-text\">*.jar</code>파일과 <code class=\"language-text\">*-plain.jar</code>파일 두개가 생긴다. <code class=\"language-text\">*-plain.jar</code>파일은 의존성이 포함되지 않은 파일이기 때문에 파일 용량도 작고 정상적으로 서버가 구동되지 않는다. 따라서 서버 실행 스크립트를 수정해주거나 gradle 빌드시에 <code class=\"language-text\">*-plain.jar</code>파일이 생성되지 않도록 <code class=\"language-text\">build.gradle</code>파일을 수정 해주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre class=\"language-gradle\"><code class=\"language-gradle\">jar {\n    enabled = false\n}</code></pre></div>","excerpt":"amazon-linux 로 생성한 EC2에서 진행하였습니다. 1. EC2에서 git, java 설치 git 설치 java 설치(각자 버전에 맞게) 2. git에서 소스 내려받기 3. 패키지 빌드 프로젝트 루트 디렉토리에서 실행 (1) maven maven 빌드 후에 경로에  확장자명으로 파일이 생성된다. 정상적으로 빌드 되었는지 실행해보자. (2) gradle gradle 빌드 후에는 이하에  파일이 생성된다. 마찬가지로 오류 없이 빌드 되는지 실행해본다. 4. deploy.sh 작성 (1) deploy.sh 샘플 (2) gradle 빌드 후 서버 구동시 주의사항 gradle 빌드시에 따로 설정을 해주지 않으면 파일과 파일 두개가 생긴다. 파일은 의존성이 포함되지 않은 파일이기 때문에 파일 용량도 작고 정상적으로 서버가 구동되지 않는다. 따라서 서버 실행 스크립트를 수정해주거나 gradle 빌드시에 파일이 생성되지 않도록 파일을 수정 해주어야 한다.","frontmatter":{"date":"August 28, 2022","title":"AWS EC2에 Spring boot 배포하기!(작성중..)","categories":"AWS","author":"막걸리에 감자전","emoji":"🔮"},"fields":{"slug":"/aws-001/"}},"next":{"id":"80d44596-f2d1-5f75-8e5d-4a4565c2917f","html":"<h1 id=\"1-테스트\" style=\"position:relative;\"><a href=\"#1-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"1 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 테스트</h1>\n<p>첫글이 제대로 보이는지 테스트</p>","frontmatter":{"date":"August 28, 2022","title":"첫글 테스트","categories":"블로그 잡담","author":"막걸리에 감자전","emoji":"🔮"},"fields":{"slug":"/algorithm-001/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://koreanckh.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/aws-001/","nextSlug":"/algorithm-001/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}